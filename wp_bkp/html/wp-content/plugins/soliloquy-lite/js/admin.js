jQuery(document).ready(function(c){var b;c(".soliloquy-image-meta").hide();if(c("#soliloquy-width").length>0&&0==c("#soliloquy-width").val().length){c("#soliloquy-width").val(soliloquy.width)}if(c("#soliloquy-height").length>0&&0==c("#soliloquy-height").val().length){c("#soliloquy-height").val(soliloquy.height)}if(c("#soliloquy-speed").length>0&&0==c("#soliloquy-speed").val().length){c("#soliloquy-speed").val(soliloquy.speed)}if(c("#soliloquy-duration").length>0&&0==c("#soliloquy-duration").val().length){c("#soliloquy-duration").val(soliloquy.duration)}c(".soliloquy-size-more").on("click.soliloquySizeExplain",function(m){m.preventDefault();c("#soliloquy-explain-size").fadeToggle()});c("#soliloquy-area").on("click.soliloquyRemove",".remove-image",function(n){n.preventDefault();b=c(this).parent().attr("id");c("#soliloquy-upload").after('<span class="soliloquy-waiting"><img class="spinner" src="'+soliloquy.spinner+'" width="16px" height="16px" style="margin: 0 5px; vertical-align: bottom;" />'+soliloquy.removing+"</span>");var m={action:"soliloquy_remove_images",attachment_id:b,nonce:soliloquy.removenonce};c.post(soliloquy.ajaxurl,m,function(o){c("#"+b).fadeOut("normal",function(){c(this).remove();c(".soliloquy-waiting").fadeOut("normal",function(){c(this).remove()})})},"json")});c("#soliloquy-area").on("click.soliloquyModify",".modify-image",function(m){m.preventDefault();c("html").addClass("soliloquy-editing");b=c(this).next().attr("id");tb_show(soliloquy.modifytb,"TB_inline?width=640&height=500&inlineId="+b);c(document).contents().find("#TB_closeWindowButton").on("click.soliloquyIframe",function(){if(c("html").hasClass("soliloquy-editing")){c("html").removeClass("soliloquy-editing");tb_remove()}});c(document).contents().find("#TB_overlay").on("click.soliloquyIframe",function(){if(c("html").hasClass("soliloquy-editing")){c("html").removeClass("soliloquy-editing");tb_remove()}});return false});c(document).on("click.soliloquyMeta",".soliloquy-meta-submit",function(q){q.preventDefault();var o=c(this).parent().find(".soliloquy-meta-table").attr("id");var n=o.split("-");var m=n[3];var p={action:"soliloquy_update_meta",attach:m,id:soliloquy.id,nonce:soliloquy.metanonce};c("#"+o+" td").each(function(){var r=c(this).find("*");c.each(r,function(){var s=c(this).attr("class");var t=c(this).val();if("checkbox"==c(this).attr("type")){var t=c(this).is(":checked")?"true":"false"}p[s]=t})});c(this).after('<span class="soliloquy-waiting"><img class="spinner" src="'+soliloquy.spinner+'" width="16px" height="16px" style="margin: 0 5px; vertical-align: middle;" />'+soliloquy.saving+"</span>");c.post(soliloquy.ajaxurl,p,function(r){c(".soliloquy-waiting").fadeOut("normal",function(){c(this).remove()});var s=setTimeout(function(){c("html").removeClass("soliloquy-editing");tb_remove()},1000)},"json")});c("#soliloquy-area").on("click.soliloquyUpload","#soliloquy-upload",function(m){m.preventDefault();c("html").addClass("soliloquy-uploading");b=c(this).parent().prev().attr("name");tb_show(soliloquy.upload,"media-upload.php?post_id="+soliloquy.id+"&type=image&context=soliloquy-image-uploads&TB_iframe=true&width=640&height=500");c(document).contents().find("#TB_closeWindowButton").on("click.soliloquyIframe",function(){if(c("html").hasClass("soliloquy-uploading")){c("html").removeClass("soliloquy-uploading");tb_remove();a()}});c(document).contents().find("#TB_overlay").on("click.soliloquyIframe",function(){if(c("html").hasClass("soliloquy-uploading")){c("html").removeClass("soliloquy-uploading");tb_remove();a()}});return false});window.original_send_to_editor=window.send_to_editor;window.send_to_editor=function(m){if(b){tb_remove();c("html").removeClass("soliloquy-uploading");var n=setTimeout(function(){a()},1500)}else{window.original_send_to_editor(m)}};var b="";var d="";var k="";var e="";var i="";var j="";var l="";var h="";var g="";var f=c("#soliloquy-images");if(0!==f.length){f.sortable({containment:"#soliloquy-area",update:function(n,o){c(".soliloquy-waiting").show();var m={url:soliloquy.ajaxurl,type:"post",async:true,cache:false,dataType:"json",data:{action:"soliloquy_sort_images",order:f.sortable("toArray").toString(),post_id:soliloquy.id,nonce:soliloquy.sortnonce},success:function(p){c(".soliloquy-waiting").hide();return},error:function(q,r,p){c(".soliloquy-waiting").hide();return}};c.ajax(m)}})}function a(){var n={action:"soliloquy_refresh_images",id:soliloquy.id,nonce:soliloquy.nonce};var m="";c("#soliloquy-upload").after('<span class="soliloquy-waiting"><img class="spinner" src="'+soliloquy.spinner+'" width="16px" height="16px" style="margin: 0 5px; vertical-align: bottom;" />'+soliloquy.loading+"</span>");c.post(soliloquy.ajaxurl,n,function(o){c.each(o.images,function(q,p){var r=o.images[q];m+='<li id="'+r.id+'" class="soliloquy-image attachment-'+r.id+'"><img src="'+r.src+'" width="'+r.width+'" height="'+r.height+'" /><a href="#" class="remove-image" title="'+soliloquy.remove+'"></a><a href="#" class="modify-image" title="'+soliloquy.modify+'"></a><div id="meta-'+r.id+'" class="soliloquy-image-meta" style="display: none;"><div class="soliloquy-meta-wrap"><h2>'+soliloquy.metatitle+"</h2><p>"+soliloquy.metadesc+"</p>";if(r.before_image_meta_table){c.each(r.before_image_meta_table,function(s,t){m+=r.before_image_meta_table[s]})}m+='<table id="soliloquy-meta-table-'+r.id+'" class="form-table soliloquy-meta-table"><tbody>';if(r.before_image_title){c.each(r.before_image_title,function(s,t){m+=r.before_image_title[s]})}m+='<tr id="soliloquy-title-box-'+r.id+'" valign="middle"><th scope="row">'+soliloquy.title+'</th><td><input id="soliloquy-title-'+r.id+'" class="soliloquy-title" type="text" size="75" name="_soliloquy_uploads[title]" value="'+r.title+'" /></td></tr>';if(r.before_image_alt){c.each(r.before_image_alt,function(s,t){m+=r.before_image_alt[s]})}m+='<tr id="soliloquy-alt-box-'+r.id+'" valign="middle"><th scope="row">'+soliloquy.alt+'</th><td><input id="soliloquy-alt-'+r.id+'" class="soliloquy-alt" type="text" size="75" name="_soliloquy_uploads[alt]" value="'+r.alt+'" /></td></tr>';if(r.before_image_link){c.each(r.before_image_link,function(s,t){m+=r.before_image_link[s]})}m+='<tr id="soliloquy-link-box-'+r.id+'" valign="middle"><th scope="row">'+soliloquy.link+'</th><td><label class="soliloquy-link-url">'+soliloquy.url+'</label><input id="soliloquy-link-'+r.id+'" class="soliloquy-link" type="text" size="70" name="_soliloquy_uploads[link]" value="'+r.link+'" /><label class="soliloquy-link-title-label">'+soliloquy.linktitle+'</label><input id="soliloquy-link-title-'+r.id+'" class="soliloquy-link-title" type="text" size="40" name="_soliloquy_uploads[link_title]" value="'+r.linktitle+'" /><input id="soliloquy-link-tab-'+r.id+'" class="soliloquy-link-check" type="checkbox" name="_soliloquy_uploads[link_tab]" value="'+r.linktab+'"'+r.linkcheck+' /><span class="description">'+soliloquy.tab+"</span></td></tr>";if(r.before_image_caption){c.each(r.before_image_caption,function(s,t){m+=r.before_image_caption[s]})}m+='<tr id="soliloquy-caption-box-'+r.id+'" valign="middle"><th scope="row">'+soliloquy.caption+'</th><td><textarea id="soliloquy-caption-'+r.id+'" class="soliloquy-caption" rows="3" cols="75" name="_soliloquy_uploads[caption]">'+r.caption+"</textarea></td></tr>";if(r.after_meta_defaults){c.each(r.after_meta_defaults,function(s,t){m+=r.after_meta_defaults[s]})}m+="</tbody></table>";if(r.after_image_meta_table){c.each(r.after_image_meta_table,function(s,t){m+=r.after_image_meta_table[s]})}m+='<a href="#" class="soliloquy-meta-submit button-secondary" title="'+soliloquy.savemeta+'">'+soliloquy.savemeta+"</a></div></div></li>"});c("#soliloquy-images").html(m);c(".soliloquy-image-meta").hide()},"json");c(".soliloquy-waiting").fadeOut("normal",function(){c(this).remove()})}c("#soliloquy-dismiss-notice").on("click.soliloquyDismiss",function(n){n.preventDefault();var m={url:soliloquy.ajaxurl,type:"post",async:true,cache:false,dataType:"json",data:{action:"soliloquy_dismiss_notice",nonce:soliloquy.dismissnonce},success:function(o){c("#setting-error-tgmsp-upgrade-soliloquy").fadeOut();return},error:function(p,q,o){return}};c.ajax(m)})});